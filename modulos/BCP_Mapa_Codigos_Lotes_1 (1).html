<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BCP - Mapa de C√≥digos y Cruces de Lotes</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap');
        
        :root {
            --bg-dark: #0a0f1a;
            --bg-card: #111827;
            --bg-card-alt: #1f2937;
            --border: #374151;
            --text: #f3f4f6;
            --text-muted: #9ca3af;
            --purple: #8b5cf6;
            --green: #10b981;
            --blue: #3b82f6;
            --amber: #f59e0b;
            --red: #ef4444;
            --cyan: #06b6d4;
            --pink: #ec4899;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'IBM Plex Sans', sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            padding: 40px;
        }
        
        .container {
            max-width: 1800px;
            margin: 0 auto;
        }
        
        /* Header */
        .header {
            text-align: center;
            margin-bottom: 50px;
            padding: 40px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(16, 185, 129, 0.1));
            border-radius: 20px;
            border: 1px solid var(--border);
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--purple), var(--green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        
        .header p {
            color: var(--text-muted);
            font-size: 1.1rem;
        }
        
        /* Section Title */
        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 40px 0 24px;
            padding-left: 16px;
            border-left: 4px solid var(--purple);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .section-title .icon {
            font-size: 1.8rem;
        }
        
        /* Module Cards Grid */
        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 24px;
            margin-bottom: 50px;
        }
        
        .module-card {
            background: var(--bg-card);
            border-radius: 16px;
            border: 1px solid var(--border);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .module-card:hover {
            border-color: var(--purple);
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(139, 92, 246, 0.15);
        }
        
        .module-header {
            padding: 20px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }
        
        .module-header h3 {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .module-header .emoji {
            font-size: 1.5rem;
        }
        
        .module-file {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-muted);
            background: var(--bg-card-alt);
            padding: 4px 10px;
            border-radius: 6px;
        }
        
        .module-content {
            padding: 20px 24px;
        }
        
        /* Code Section */
        .code-section {
            margin-bottom: 20px;
        }
        
        .code-section:last-child {
            margin-bottom: 0;
        }
        
        .code-section-title {
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .code-section-title.genera {
            color: var(--green);
        }
        
        .code-section-title.genera::before {
            content: '‚Üë';
            display: inline-block;
            width: 20px;
            height: 20px;
            background: rgba(16, 185, 129, 0.2);
            border-radius: 4px;
            text-align: center;
            line-height: 20px;
        }
        
        .code-section-title.consume {
            color: var(--blue);
        }
        
        .code-section-title.consume::before {
            content: '‚Üì';
            display: inline-block;
            width: 20px;
            height: 20px;
            background: rgba(59, 130, 246, 0.2);
            border-radius: 4px;
            text-align: center;
            line-height: 20px;
        }
        
        .code-section-title.storage {
            color: var(--amber);
        }
        
        .code-section-title.storage::before {
            content: 'üíæ';
            display: inline-block;
            width: 20px;
            height: 20px;
            text-align: center;
            line-height: 20px;
            font-size: 0.8rem;
        }
        
        /* Code Items */
        .code-item {
            background: var(--bg-card-alt);
            border-radius: 10px;
            padding: 14px 16px;
            margin-bottom: 10px;
            border-left: 3px solid transparent;
        }
        
        .code-item:last-child {
            margin-bottom: 0;
        }
        
        .code-item.genera {
            border-left-color: var(--green);
        }
        
        .code-item.consume {
            border-left-color: var(--blue);
        }
        
        .code-item.storage {
            border-left-color: var(--amber);
        }
        
        .code-name {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 4px;
        }
        
        .code-format {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.8rem;
            color: var(--cyan);
            background: rgba(6, 182, 212, 0.1);
            padding: 4px 10px;
            border-radius: 6px;
            display: inline-block;
            margin: 4px 0;
        }
        
        .code-desc {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 4px;
        }
        
        .code-example {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.75rem;
            color: var(--pink);
            margin-top: 6px;
        }
        
        /* No data */
        .no-data {
            color: var(--text-muted);
            font-size: 0.85rem;
            font-style: italic;
            padding: 10px;
            background: var(--bg-card-alt);
            border-radius: 8px;
            text-align: center;
        }
        
        /* Flow Diagram */
        .flow-container {
            background: var(--bg-card);
            border-radius: 20px;
            border: 1px solid var(--border);
            padding: 40px;
            margin-bottom: 50px;
            overflow-x: auto;
        }
        
        .flow-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .flow-row:last-child {
            margin-bottom: 0;
        }
        
        .flow-node {
            background: var(--bg-card-alt);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 16px 24px;
            min-width: 180px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .flow-node:hover {
            transform: scale(1.02);
        }
        
        .flow-node.source { border-color: var(--green); }
        .flow-node.process { border-color: var(--purple); }
        .flow-node.sink { border-color: var(--amber); }
        
        .flow-node .icon {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }
        
        .flow-node .name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }
        
        .flow-node .code {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.7rem;
            color: var(--cyan);
            background: rgba(6, 182, 212, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
            display: inline-block;
        }
        
        .flow-arrow {
            font-size: 1.5rem;
            color: var(--text-muted);
        }
        
        .flow-arrow.vertical {
            transform: rotate(90deg);
        }
        
        .flow-connection {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }
        
        .flow-connection-label {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.7rem;
            color: var(--green);
            background: rgba(16, 185, 129, 0.1);
            padding: 4px 10px;
            border-radius: 6px;
        }
        
        /* Cross Reference Table */
        .cross-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 50px;
        }
        
        .cross-table th,
        .cross-table td {
            padding: 14px 16px;
            text-align: left;
            border: 1px solid var(--border);
        }
        
        .cross-table th {
            background: var(--bg-card-alt);
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }
        
        .cross-table td {
            background: var(--bg-card);
            font-size: 0.9rem;
            vertical-align: top;
        }
        
        .cross-table tr:hover td {
            background: var(--bg-card-alt);
        }
        
        .cross-module {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .cross-codes {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .cross-code-item {
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.8rem;
            background: var(--bg-card-alt);
            padding: 6px 10px;
            border-radius: 6px;
            display: inline-block;
        }
        
        .cross-code-item.green { color: var(--green); border-left: 2px solid var(--green); }
        .cross-code-item.blue { color: var(--blue); border-left: 2px solid var(--blue); }
        .cross-code-item.amber { color: var(--amber); border-left: 2px solid var(--amber); }
        
        /* Legend */
        .legend {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            padding: 20px 24px;
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid var(--border);
            margin-bottom: 30px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }
        
        .legend-color.green { background: rgba(16, 185, 129, 0.2); color: var(--green); }
        .legend-color.blue { background: rgba(59, 130, 246, 0.2); color: var(--blue); }
        .legend-color.amber { background: rgba(245, 158, 11, 0.2); color: var(--amber); }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 30px;
            color: var(--text-muted);
            font-size: 0.9rem;
            border-top: 1px solid var(--border);
            margin-top: 50px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding: 20px;
            }
            
            .modules-grid {
                grid-template-columns: 1fr;
            }
            
            .flow-row {
                flex-direction: column;
            }
            
            .flow-arrow {
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üîó Mapa de C√≥digos y Cruces de Lotes</h1>
            <p>BioCannaPhrama ERP - Trazabilidad de C√≥digos entre M√≥dulos</p>
        </header>
        
        <!-- Legend -->
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color green">‚Üë</div>
                <span><strong>GENERA:</strong> C√≥digos que el m√≥dulo crea</span>
            </div>
            <div class="legend-item">
                <div class="legend-color blue">‚Üì</div>
                <span><strong>CONSUME:</strong> C√≥digos que el m√≥dulo necesita de otros</span>
            </div>
            <div class="legend-item">
                <div class="legend-color amber">üíæ</div>
                <span><strong>STORAGE:</strong> Claves localStorage donde guarda</span>
            </div>
        </div>
        
        <!-- Module Cards -->
        <h2 class="section-title"><span class="icon">üìã</span> Detalle de C√≥digos por M√≥dulo</h2>
        
        <div class="modules-grid">
            <!-- Recepci√≥n Materia Prima -->
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üåø</span> Recepci√≥n Materia Prima</h3>
                    <span class="module-file">BCP_recepcionMP.html</span>
                </div>
                <div class="module-content">
                    <div class="code-section">
                        <div class="code-section-title genera">C√≥digos que Genera</div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID Interno de Ingreso (Bolsa)</div>
                            <div class="code-format">ING-{YYYYMMDD}-{HHMMSS}-{RAND}</div>
                            <div class="code-desc">Identificador √∫nico de sistema para cada bolsa registrada</div>
                            <div class="code-example">Ej: ING-20250610-143052-A7K2</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">C√≥digo de Lote de Bolsa</div>
                            <div class="code-format">BCP-{AAMMDD}-{IV}-{IP}-{NNN}</div>
                            <div class="code-desc">IV=Iniciales Variedad, IP=Iniciales Proveedor, NNN=Secuencial</div>
                            <div class="code-example">Ej: BCP-250610-AM-CU-001 (Amnesia Haze de Cultivadores Unidos)</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID Interno de Salida (Lote Extracci√≥n)</div>
                            <div class="code-format">SAL-{YYYYMMDD}-{HHMMSS}-{RAND}</div>
                            <div class="code-desc">Identificador √∫nico cuando se env√≠a MP a extracci√≥n</div>
                            <div class="code-example">Ej: SAL-20250610-150230-B3X9</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">C√≥digo de Lote de Extracci√≥n</div>
                            <div class="code-format">BCP-{BHO|RSO}-{AAMMDD}-{NNN}</div>
                            <div class="code-desc">Tipo de extracci√≥n + fecha + secuencial del d√≠a</div>
                            <div class="code-example">Ej: BCP-BHO-250610-001, BCP-RSO-250610-002</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title consume">C√≥digos que Consume</div>
                        <div class="no-data">Este m√≥dulo es fuente primaria, no consume c√≥digos de otros m√≥dulos</div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title storage">Almacenamiento</div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_ingresos_v82</div>
                            <div class="code-desc">Array de bolsas con: id, codigo_lote, estado, usado_en_lote, usos_parciales[]</div>
                        </div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_salidas_v82</div>
                            <div class="code-desc">Array de lotes extracci√≥n con: id, nombreLote, tipoExtraccion, bolsas[]</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Control de Extractos -->
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üß™</span> Control de Extractos</h3>
                    <span class="module-file">BCP_ControlExtractos.html</span>
                </div>
                <div class="module-content">
                    <div class="code-section">
                        <div class="code-section-title genera">C√≥digos que Genera</div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID Interno de Ficha</div>
                            <div class="code-format">FIC-{YYYYMMDD}-{RAND}</div>
                            <div class="code-desc">Identificador √∫nico de sistema para cada ficha de extracto</div>
                            <div class="code-example">Ej: FIC-20250610-A4B2</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">C√≥digo de Extracto</div>
                            <div class="code-format">BCP-EXT-{AAMMDD}-{NNN}</div>
                            <div class="code-desc">C√≥digo del extracto procesado, secuencial por d√≠a</div>
                            <div class="code-example">Ej: BCP-EXT-250610-001</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">C√≥digo de Fracci√≥n</div>
                            <div class="code-format">BCP-FRC-{TIPO}-{AAMMDD}-{NNN}</div>
                            <div class="code-desc">TIPO: EXT, SAL, CRS, BUD, DST, OTR</div>
                            <div class="code-example">Ej: BCP-FRC-CRS-250610-001 (Cristales)</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">C√≥digo de Destilado</div>
                            <div class="code-format">BCP-DST-{AAMMDD}-{NNN}</div>
                            <div class="code-desc">C√≥digo para productos destilados</div>
                            <div class="code-example">Ej: BCP-DST-250610-001</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title consume">C√≥digos que Consume</div>
                        
                        <div class="code-item consume">
                            <div class="code-name">ID Lote Extracci√≥n (de Recepci√≥n MP)</div>
                            <div class="code-format">SAL-{YYYYMMDD}-{HHMMSS}-{RAND}</div>
                            <div class="code-desc">Lee de bcp_salidas_v82 ‚Üí campo loteOrigenId</div>
                        </div>
                        
                        <div class="code-item consume">
                            <div class="code-name">C√≥digo Lote Extracci√≥n (de Recepci√≥n MP)</div>
                            <div class="code-format">BCP-{BHO|RSO}-{AAMMDD}-{NNN}</div>
                            <div class="code-desc">Lee de bcp_salidas_v82 ‚Üí campo nombreLote</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title storage">Almacenamiento</div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_extractos_fichas_v1</div>
                            <div class="code-desc">Fichas con: id, codigo, loteOrigenId, loteOrigenCodigo, tipoExtraccion</div>
                        </div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_extractos_fracciones_v1</div>
                            <div class="code-desc">Fracciones con: id, codigo, fichaId, fichaCodigo, tipo, cantidadDisponible</div>
                        </div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_extractos_destilados_v1</div>
                            <div class="code-desc">Destilados procesados desde fracciones</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- √ìrdenes de Producci√≥n -->
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üìã</span> √ìrdenes de Producci√≥n</h3>
                    <span class="module-file">solicitudesV4.html</span>
                </div>
                <div class="module-content">
                    <div class="code-section">
                        <div class="code-section-title genera">C√≥digos que Genera</div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID de Orden de Producci√≥n</div>
                            <div class="code-format">BCP-OP-{YYYYMMDD}-{NNN}</div>
                            <div class="code-desc">Orden de producci√≥n con contador secuencial</div>
                            <div class="code-example">Ej: BCP-OP-20250610-001</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title consume">C√≥digos que Consume (Manual)</div>
                        
                        <div class="code-item consume">
                            <div class="code-name">Lote de Materia Prima</div>
                            <div class="code-format">Campo de texto libre</div>
                            <div class="code-desc">El usuario ingresa manualmente los lotes de MP/Extractos a usar</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title storage">Almacenamiento</div>
                        <div class="code-item storage">
                            <div class="code-name">bcpOrdenesProduccionV3_4</div>
                            <div class="code-desc">√ìrdenes con: id, materiasPrimas[{nombre, lote, cantidad}], historial[]</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Gesti√≥n de Residuos -->
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üóëÔ∏è</span> Gesti√≥n de Residuos</h3>
                    <span class="module-file">BCP_GestionResiduos_v4.html</span>
                </div>
                <div class="module-content">
                    <div class="code-section">
                        <div class="code-section-title genera">C√≥digos que Genera</div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID de Residuo</div>
                            <div class="code-format">RES-{YYYYMMDD}-{NNN}</div>
                            <div class="code-desc">Identificador √∫nico de cada residuo generado</div>
                            <div class="code-example">Ej: RES-20250610-001</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title consume">C√≥digos que Consume</div>
                        
                        <div class="code-item consume">
                            <div class="code-name">Lote de Producci√≥n (opcional)</div>
                            <div class="code-format">Lee de bcp_extracciones</div>
                            <div class="code-desc">Vincula residuos a lotes de producci√≥n para trazabilidad</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title storage">Almacenamiento</div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_residuos_v4</div>
                            <div class="code-desc">Residuos con: id, loteProduccion, categoria, estado, historial[]</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Proveedores -->
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üè™</span> Gesti√≥n de Proveedores</h3>
                    <span class="module-file">proveedorgpt.html</span>
                </div>
                <div class="module-content">
                    <div class="code-section">
                        <div class="code-section-title genera">C√≥digos que Genera</div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID de Proveedor</div>
                            <div class="code-format">BCP-PV-{NNNN}</div>
                            <div class="code-desc">Secuencial global de proveedores</div>
                            <div class="code-example">Ej: BCP-PV-0001, BCP-PV-0042</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title consume">C√≥digos que Consume</div>
                        <div class="no-data">Este m√≥dulo es maestro, no consume c√≥digos de otros m√≥dulos</div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title storage">Almacenamiento</div>
                        <div class="code-item storage">
                            <div class="code-name">BCP_proveedores_v2</div>
                            <div class="code-desc">Proveedores con: id, nombre, rut, rubro, estado, insumos[]</div>
                        </div>
                        <div class="code-item storage">
                            <div class="code-name">BCP_prov_sequence_v2</div>
                            <div class="code-desc">Contador secuencial para IDs</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Compras -->
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üõí</span> Sistema de Compras</h3>
                    <span class="module-file">GPTcomprasV4.html</span>
                </div>
                <div class="module-content">
                    <div class="code-section">
                        <div class="code-section-title genera">C√≥digos que Genera</div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID Interno de Solicitud</div>
                            <div class="code-format">sol_{UUID}</div>
                            <div class="code-desc">UUID √∫nico de sistema</div>
                            <div class="code-example">Ej: sol_a1b2c3d4-e5f6-7890</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">N√∫mero de Solicitud</div>
                            <div class="code-format">SOL-{YYYY}-{NNN}</div>
                            <div class="code-desc">Correlativo anual de solicitudes</div>
                            <div class="code-example">Ej: SOL-2025-001</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">N√∫mero de Orden de Compra</div>
                            <div class="code-format">OC-{YYYY}-{NNN}</div>
                            <div class="code-desc">Correlativo anual de OC</div>
                            <div class="code-example">Ej: OC-2025-001</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title consume">C√≥digos que Consume</div>
                        <div class="no-data">No tiene integraci√≥n directa, referencia a proveedores es manual</div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title storage">Almacenamiento</div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_solicitudes_v1</div>
                            <div class="code-desc">Solicitudes con: id, numeroSolicitud, numeroOC, estado, compra{}, recepcion{}</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Equipos -->
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">‚öôÔ∏è</span> Gesti√≥n de Equipos</h3>
                    <span class="module-file">equiposGPTV5.html</span>
                </div>
                <div class="module-content">
                    <div class="code-section">
                        <div class="code-section-title genera">C√≥digos que Genera</div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID de Equipo</div>
                            <div class="code-format">EQ-{timestamp}</div>
                            <div class="code-desc">Timestamp √∫nico al crear equipo</div>
                            <div class="code-example">Ej: EQ-1718034567890</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">C√≥digo Interno (usuario define)</div>
                            <div class="code-format">Campo libre</div>
                            <div class="code-desc">El usuario asigna su propio c√≥digo interno</div>
                            <div class="code-example">Ej: HPLC-001, BAL-002</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID de Documento</div>
                            <div class="code-format">DOC-{timestamp}</div>
                            <div class="code-desc">Documentos adjuntos al equipo</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title consume">C√≥digos que Consume</div>
                        <div class="no-data">M√≥dulo independiente, no consume c√≥digos externos</div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title storage">Almacenamiento</div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_equipment_module_v3</div>
                            <div class="code-desc">Equipos con: id, code, logs[], documents[], maintenanceHistory[]</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Reactivos -->
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üß´</span> Reactivos Qu√≠micos</h3>
                    <span class="module-file">reactivos.html</span>
                </div>
                <div class="module-content">
                    <div class="code-section">
                        <div class="code-section-title genera">C√≥digos que Genera</div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID Num√©rico Secuencial</div>
                            <div class="code-format">{N}</div>
                            <div class="code-desc">Secuencial simple: 1, 2, 3...</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">C√≥digo Interno (usuario define)</div>
                            <div class="code-format">Campo libre (sugerencia: BCP-REA-NNNN)</div>
                            <div class="code-desc">El usuario asigna su propio c√≥digo</div>
                            <div class="code-example">Ej: BCP-REA-0001</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title consume">C√≥digos que Consume</div>
                        <div class="no-data">M√≥dulo independiente, no consume c√≥digos externos</div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title storage">Almacenamiento</div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_reactivos_v1</div>
                            <div class="code-desc">Reactivos con: id, codigoInterno, loteProveedor, stockActual</div>
                        </div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_movimientos_v1</div>
                            <div class="code-desc">Movimientos con: idReactivo, codigoReactivo, tipo, cantidad</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Insumos -->
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üì¶</span> Insumos Fungibles</h3>
                    <span class="module-file">InsumosV3.html</span>
                </div>
                <div class="module-content">
                    <div class="code-section">
                        <div class="code-section-title genera">C√≥digos que Genera</div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID Num√©rico Secuencial</div>
                            <div class="code-format">{N}</div>
                            <div class="code-desc">Secuencial simple para insumos, productos, recetas</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">C√≥digo de Insumo (usuario define)</div>
                            <div class="code-format">Campo libre</div>
                            <div class="code-desc">El usuario asigna c√≥digo para cada insumo</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title consume">C√≥digos que Consume</div>
                        <div class="no-data">M√≥dulo independiente, no consume c√≥digos externos</div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title storage">Almacenamiento</div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_fungibles_v1 / bcp_productos_v1 / bcp_recetas_v1</div>
                            <div class="code-desc">Insumos, productos terminados y sus recetas de fabricaci√≥n</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Aseo -->
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üßπ</span> Control de Aseo</h3>
                    <span class="module-file">aseov2.html</span>
                </div>
                <div class="module-content">
                    <div class="code-section">
                        <div class="code-section-title genera">C√≥digos que Genera</div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID de √Årea</div>
                            <div class="code-format">area_{random9}</div>
                            <div class="code-desc">ID aleatorio para √°reas</div>
                            <div class="code-example">Ej: area_k7x9m2p4q</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID de Producto Limpieza</div>
                            <div class="code-format">prod_{random9}</div>
                            <div class="code-desc">ID aleatorio para productos</div>
                        </div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID de Registro</div>
                            <div class="code-format">reg_{random9}</div>
                            <div class="code-desc">ID aleatorio para registros de limpieza</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title consume">C√≥digos que Consume</div>
                        <div class="no-data">M√≥dulo independiente</div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title storage">Almacenamiento</div>
                        <div class="code-item storage">
                            <div class="code-name">bcp_aseo_areas / bcp_aseo_productos / bcp_aseo_registros</div>
                            <div class="code-desc">√Åreas, productos de limpieza y registros de sanitizaci√≥n</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bit√°cora -->
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üìì</span> Bit√°cora de Laboratorio</h3>
                    <span class="module-file">bitacorav3.html</span>
                </div>
                <div class="module-content">
                    <div class="code-section">
                        <div class="code-section-title genera">C√≥digos que Genera</div>
                        
                        <div class="code-item genera">
                            <div class="code-name">ID de Registro</div>
                            <div class="code-format">BCP_{timestamp}_{random}</div>
                            <div class="code-desc">Timestamp + aleatorio hexadecimal</div>
                            <div class="code-example">Ej: BCP_1718034567890_a4b2c3</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title consume">C√≥digos que Consume (Manual)</div>
                        
                        <div class="code-item consume">
                            <div class="code-name">Campo "Lotes Relacionados"</div>
                            <div class="code-format">Campo de texto libre</div>
                            <div class="code-desc">El usuario puede referenciar cualquier lote manualmente</div>
                        </div>
                    </div>
                    
                    <div class="code-section">
                        <div class="code-section-title storage">Almacenamiento</div>
                        <div class="code-item storage">
                            <div class="code-name">BCP_BITACORA_V1</div>
                            <div class="code-desc">Registros con: id, fecha, hora, area, tipo, lotes, tags</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Flow Diagram -->
        <h2 class="section-title"><span class="icon">üîÄ</span> Flujo de C√≥digos entre M√≥dulos</h2>
        
        <div class="flow-container">
            <!-- Main Flow -->
            <div class="flow-row">
                <div class="flow-node source">
                    <div class="icon">üåø</div>
                    <div class="name">Recepci√≥n MP</div>
                    <div class="code">BCP-{AA}{MM}{DD}-{IV}-{IP}-{NNN}</div>
                </div>
                
                <div class="flow-connection">
                    <div class="flow-connection-label">bcp_salidas_v82</div>
                    <div class="flow-arrow">‚Üí</div>
                </div>
                
                <div class="flow-node process">
                    <div class="icon">üß™</div>
                    <div class="name">Control Extractos</div>
                    <div class="code">BCP-EXT-{AAMMDD}-{NNN}</div>
                </div>
                
                <div class="flow-connection">
                    <div class="flow-connection-label">Manual/Planificado</div>
                    <div class="flow-arrow">‚Üí</div>
                </div>
                
                <div class="flow-node process">
                    <div class="icon">üìã</div>
                    <div class="name">√ìrdenes Producci√≥n</div>
                    <div class="code">BCP-OP-{YYYYMMDD}-{NNN}</div>
                </div>
            </div>
            
            <div class="flow-row">
                <div class="flow-node source">
                    <div class="icon">üè™</div>
                    <div class="name">Proveedores</div>
                    <div class="code">BCP-PV-{NNNN}</div>
                </div>
                
                <div class="flow-connection">
                    <div class="flow-connection-label">Referencia manual</div>
                    <div class="flow-arrow">‚Üí</div>
                </div>
                
                <div class="flow-node process">
                    <div class="icon">üõí</div>
                    <div class="name">Compras</div>
                    <div class="code">SOL/OC-{YYYY}-{NNN}</div>
                </div>
                
                <div class="flow-connection">
                    <div class="flow-connection-label">Recepci√≥n de compra</div>
                    <div class="flow-arrow">‚Üí</div>
                </div>
                
                <div class="flow-node sink">
                    <div class="icon">üåø</div>
                    <div class="name">Recepci√≥n MP</div>
                    <div class="code">Ingreso de material</div>
                </div>
            </div>
            
            <div class="flow-row">
                <div class="flow-node process">
                    <div class="icon">‚öóÔ∏è</div>
                    <div class="name">Cualquier Proceso</div>
                    <div class="code">Lote de producci√≥n</div>
                </div>
                
                <div class="flow-connection">
                    <div class="flow-connection-label">Vinculaci√≥n opcional</div>
                    <div class="flow-arrow">‚Üí</div>
                </div>
                
                <div class="flow-node sink">
                    <div class="icon">üóëÔ∏è</div>
                    <div class="name">Residuos</div>
                    <div class="code">RES-{YYYYMMDD}-{NNN}</div>
                </div>
            </div>
        </div>
        
        <!-- Cross Reference Table -->
        <h2 class="section-title"><span class="icon">üìä</span> Tabla de Cruces de Lotes</h2>
        
        <table class="cross-table">
            <thead>
                <tr>
                    <th style="width: 200px;">M√≥dulo Origen</th>
                    <th>C√≥digo que Genera</th>
                    <th style="width: 200px;">M√≥dulo Destino</th>
                    <th>Campo de Referencia</th>
                    <th style="width: 150px;">Tipo de Integraci√≥n</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="cross-module">üåø Recepci√≥n MP</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item green">SAL-{YYYYMMDD}-{HHMMSS}-{RAND}</span>
                            <span class="cross-code-item green">BCP-{BHO|RSO}-{AAMMDD}-{NNN}</span>
                        </div>
                    </td>
                    <td><span class="cross-module">üß™ Control Extractos</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item blue">loteOrigenId</span>
                            <span class="cross-code-item blue">loteOrigenCodigo</span>
                        </div>
                    </td>
                    <td><strong style="color: var(--green);">‚úÖ AUTOM√ÅTICA</strong></td>
                </tr>
                <tr>
                    <td><span class="cross-module">üß™ Control Extractos</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item green">BCP-FRC-{TIPO}-{AAMMDD}-{NNN}</span>
                        </div>
                    </td>
                    <td><span class="cross-module">üìã √ìrdenes Producci√≥n</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item amber">materiasPrimas[].lote</span>
                        </div>
                    </td>
                    <td><strong style="color: var(--amber);">‚ö†Ô∏è MANUAL</strong></td>
                </tr>
                <tr>
                    <td><span class="cross-module">üìã √ìrdenes Producci√≥n</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item green">BCP-OP-{YYYYMMDD}-{NNN}</span>
                        </div>
                    </td>
                    <td><span class="cross-module">üìì Bit√°cora</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item amber">campo "lotes"</span>
                        </div>
                    </td>
                    <td><strong style="color: var(--amber);">‚ö†Ô∏è MANUAL</strong></td>
                </tr>
                <tr>
                    <td><span class="cross-module">‚öóÔ∏è Cualquier Proceso</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item green">Lote de producci√≥n</span>
                        </div>
                    </td>
                    <td><span class="cross-module">üóëÔ∏è Residuos</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item amber">loteProduccion</span>
                        </div>
                    </td>
                    <td><strong style="color: var(--amber);">‚ö†Ô∏è MANUAL/SELECT</strong></td>
                </tr>
                <tr>
                    <td><span class="cross-module">üè™ Proveedores</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item green">BCP-PV-{NNNN}</span>
                        </div>
                    </td>
                    <td><span class="cross-module">üõí Compras</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item amber">campo proveedor</span>
                        </div>
                    </td>
                    <td><strong style="color: var(--red);">‚ùå SIN INTEGRAR</strong></td>
                </tr>
                <tr>
                    <td><span class="cross-module">üõí Compras</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item green">OC-{YYYY}-{NNN}</span>
                        </div>
                    </td>
                    <td><span class="cross-module">üåø Recepci√≥n MP</span></td>
                    <td>
                        <div class="cross-codes">
                            <span class="cross-code-item amber">N/A</span>
                        </div>
                    </td>
                    <td><strong style="color: var(--red);">‚ùå SIN INTEGRAR</strong></td>
                </tr>
            </tbody>
        </table>
        
        <!-- Recommendations -->
        <h2 class="section-title"><span class="icon">üí°</span> Recomendaciones de Integraci√≥n</h2>
        
        <div class="modules-grid">
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üî¥</span> Integraciones Cr√≠ticas Pendientes</h3>
                </div>
                <div class="module-content">
                    <div class="code-item" style="border-left-color: var(--red);">
                        <div class="code-name">Compras ‚Üí Recepci√≥n MP</div>
                        <div class="code-desc">Cuando se recibe una OC, deber√≠a crear autom√°ticamente el ingreso en Recepci√≥n MP con referencia a la OC</div>
                    </div>
                    <div class="code-item" style="border-left-color: var(--red);">
                        <div class="code-name">Proveedores ‚Üí Compras</div>
                        <div class="code-desc">El selector de proveedor en Compras deber√≠a leer de BCP_proveedores_v2</div>
                    </div>
                    <div class="code-item" style="border-left-color: var(--red);">
                        <div class="code-name">Control Extractos ‚Üí √ìrdenes Producci√≥n</div>
                        <div class="code-desc">Las fracciones disponibles deber√≠an aparecer como selector en las √≥rdenes de producci√≥n</div>
                    </div>
                </div>
            </div>
            
            <div class="module-card">
                <div class="module-header">
                    <h3><span class="emoji">üü¢</span> Integraci√≥n Existente Funcionando</h3>
                </div>
                <div class="module-content">
                    <div class="code-item" style="border-left-color: var(--green);">
                        <div class="code-name">Recepci√≥n MP ‚Üí Control Extractos</div>
                        <div class="code-desc">‚úÖ Los lotes de extracci√≥n (BHO/RSO) creados en Recepci√≥n aparecen autom√°ticamente en Control de Extractos</div>
                        <div class="code-example">Clave: bcp_salidas_v82 ‚Üí loteOrigenId, loteOrigenCodigo</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="footer">
            <p>BioCannaPhrama ¬© 2025 - Mapa de Trazabilidad de C√≥digos</p>
            <p style="margin-top: 10px; font-size: 0.8rem;">
                ‚úÖ Cumplimiento BPM | ‚úÖ ISO 9001 | ‚úÖ Decreto 594/2000 | ‚úÖ Decreto 148/2004
            </p>
        </footer>
    </div>
</body>
</html>
